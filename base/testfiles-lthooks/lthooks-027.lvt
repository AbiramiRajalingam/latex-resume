\documentclass{article}
\usepackage{expl3}

\def\foo#1{bar}  % dummy which does something with its argument to 
                 % generate part of the file name
\begin{filecontents}[force]{my-\foo{english}.xxx}
  \typeout{File: my-\foo{english}.xxx}
\end{filecontents}

\input{regression-test}
\begin{document}
\START

\ExplSyntaxOn
\TEST { Using~stuff~once~(expect~'aaa~bbb'): }
  {
    \hook_new:n { A }
    \hook_gput_code:nnn { A } { . } { \message{aaa} }
    \hook_use_once:n { A }
    \hook_gput_code:nnn { A } { . } { \message{bbb} }
    \hook_log:n { A }
  }
\ExplSyntaxOff

\TEST { Braces in hook names (expect 'aaa bbb'): }
  {
    \NewHook { -{hook}- }
    \AddToHook { -{hook}- } {\message{aaa}}
    \UseOneTimeHook { -{hook}- }
    \AddToHook { -{hook}- } {\message{bbb}}
    \ShowHook { -{hook}- }
  }

\TEST { Macro with argument (expect 'my-bar.xxx' and 'after'): }
  {
    \AddToHook{file/after/my-\foo{english}.xxx}{\typeout{File: after}}
    \input{my-\foo{english}.xxx}
  }

\end{document}
