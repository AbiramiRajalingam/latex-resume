\documentclass{article}

%\DebugHookOn

\input{regression-test}

\AddToHook{begindocument}{%
  \typeout{+++++ check}%
  \AddToHook{begindocument}{\typeout{+++++ check nested}}
}
\AddToHook{env/document/begin}{%
  \typeout{***** check}%
  \AddToHook{env/document/begin}{\typeout{***** check nested}}
}

\START

\begin{document}
test

\END
