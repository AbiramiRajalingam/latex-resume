
\documentclass{minimal}
\input{regression-test}

\RequirePackage[enable-debug]{expl3}
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation , log-functions }
\ExplSyntaxOff

\input xparse-generic.tex

\START


\ExplSyntaxOn

\TEST { Missing~ required }
  {
    \NewDocumentCommand { \testA } { r<> } { }                \testA \relax
    \NewDocumentCommand { \testB } { R(){?} R(){?} } { }      \testB (X) \relax
    \RenewDocumentCommand { \testA } { +r<> } { }             \testA \relax
    \RenewDocumentCommand { \testB } { R(){?} +R(){?} } { }   \testB (X) \relax
  }

\TEST { Optional~ +~ mandatory~ same~ delimiters }
  {
    \NewDocumentCommand{\foo}{osr[]}{\typeout{|#1|#2|#3|}}
    \foo[A]
    \foo*[B]
    \foo[C][D]
    \foo[E]*[G]
  }


\END
