\begin{filecontents}[force]{\jobname-1}
  \typeout{==> in \jobname-1}
\end{filecontents}

\begin{filecontents}[force]{\jobname-2}
  \typeout{==> in \jobname-2}
\end{filecontents}

\input{test2e}

\AddToHook{class/before/article}{\START \typeout{--> before article 1}\OMIT}
\AddToHook{class/after/article}{\TIMO \typeout{--> after article 1}}

\documentclass{article}

\AddToHook{class/before/article}{\typeout{--> before article 2}}
\AddToHook{class/after/article}{\typeout{--> after article 2}}

\AddToHook{package/before/doc}{\typeout{--> before doc 1}}
\AddToHook{package/after/doc}{\typeout{--> after doc 1}}
\usepackage{doc}
\AddToHook{package/before/doc}{\typeout{--> before doc 2}}
\AddToHook{package/after/doc}{\typeout{--> after doc 2}}

\AddToHook{include/before/\jobname-1}{\typeout{--> before \jobname-1 1}}
\AddToHook{include/before/\jobname-2}{\typeout{--> before \jobname-2 1}}
\AddToHook{include/end/\jobname-1}{\typeout{--> end \jobname-1 1}}
\AddToHook{include/end/\jobname-2}{\typeout{--> end \jobname-2 1}}
\AddToHook{include/after/\jobname-1}{\typeout{--> after \jobname-1 1}}
\AddToHook{include/after/\jobname-2}{\typeout{--> after \jobname-2 1}}



\includeonly{\jobname-2}

\OMIT
\begin{document}
\TIMO

\include{\jobname-1}
\include{\jobname-2}

\AddToHook{include/before/\jobname-1}{\typeout{--> before \jobname-1 2}}
\AddToHook{include/before/\jobname-2}{\typeout{--> before \jobname-2 2}}
\AddToHook{include/end/\jobname-1}{\typeout{--> end \jobname-1 2}}
\AddToHook{include/end/\jobname-2}{\typeout{--> end \jobname-2 2}}
\AddToHook{include/after/\jobname-1}{\typeout{--> after \jobname-1 2}}
\AddToHook{include/after/\jobname-2}{\typeout{--> after \jobname-2 2}}

\END

